@model SistemaEncuestas.Models.ViewModels.EncuestaViewModel
@{
    ViewBag.Title = "Responder";
}

<h2>Responder</h2>

@using (Html.BeginForm("Responder", "Encuesta", FormMethod.Post))
{
    @Html.AntiForgeryToken()
    var j = 0;

    for (int i = 0; i < Model.Preguntas.Count; i++)
    {
        <dt>
            @Html.DisplayFor(modelItem => Model.Preguntas[i].NombreP)
            <input hidden name="Respuestas[@j].IdPreguntas" value=@Model.Preguntas[i].Id />
        </dt>

        foreach (var respuesta in Model.Respuestas[i])
        {
            <dd>
                <div>
                    @Html.RadioButton("respuesta[" + j + "].Id", respuesta.Id)
                    @Html.TextBoxFor(modelItem => respuesta.Nombre, new { @hidden = "hidden" })
                    @Html.DisplayFor(modelItem => respuesta.Nombre)
                </div>
            </dd>
        }

        j++;
    }

    <dt>
        <input type="submit" class="btn btn-primary" value="Enviar Respuestas" />
    </dt>
}

<script>
    $("form").submit(function ()
    {
        $("input[type='radio']").each(function ()
        {
            if ($(this).is(":checked"))
            {
                $(this).next().attr("name", $(this).attr("name").split("Id")[0] + "AnswerText");
            }
        });
    });
</script>
